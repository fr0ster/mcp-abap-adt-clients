# Test Configuration Template for @mcp-abap-adt/adt-clients
# Copy this file to test-config.yaml and configure for your environment
# Builder Tests Configuration
#
# Usage:
#   cp tests/test-config.yaml.template tests/test-config.yaml
#   # Edit test-config.yaml with your specific values
#
# IMPORTANT: Object Naming Convention
# ===================================
# All test objects must use the ZADT_BLD_* naming convention:
# - Classes: ZADT_BLD_CLS01, ZADT_BLD_CLS02, etc.
# - Domains: ZADT_BLD_DOM01, ZADT_BLD_DOM02, etc.
# - Data Elements: ZADT_BLD_DTEL01, ZADT_BLD_DTEL02, etc.
# - Function Modules: Z_ADT_BLD_FM01, Z_ADT_BLD_FM02, etc. (must start with Z_ or Y_)
# - Function Groups: ZADT_BLD_FGR01, ZADT_BLD_FGR02, etc.
# - Interfaces: ZADT_BLD_IF01, ZADT_BLD_IF02, etc.
# - Programs: ZADT_BLD_PROG01, ZADT_BLD_PROG02, etc.
# - Tables: ZADT_BLD_TAB01, ZADT_BLD_TAB02, etc.
# - Structures: ZADT_BLD_STRU01, ZADT_BLD_STRU02, etc.
# - Views: ZADT_BLD_VIEW01, ZADT_BLD_VIEW02, etc.
# - Packages: ZADT_BLD_PKG01, ZADT_BLD_PKG02, etc.
#
# Test settings
test_settings:
  fail_fast: false
  verbose: true
  timeout: 60000  # Global test timeout (60 seconds)
  retry_on_failure: false
  max_retries: 1
  cleanup_after_test: false
  # Timeouts for different operations (in milliseconds)
  timeouts:
    default: 60000
    create: 60000
    delay: 3000  # Delay after delete/create operations

# Session persistence configuration
session_config:
  # Enable session persistence (saves cookies and CSRF tokens)
  persist_session: true
  # Directory for session files (relative to project root)
  sessions_dir: ".sessions"
  # Session ID format: {test_name}_{timestamp} or custom
  session_id_format: "auto"  # "auto" or custom string
  # Clean up session after test
  cleanup_session_after_test: false

# Lock persistence configuration
lock_config:
  # Directory for lock files (relative to project root)
  locks_dir: ".locks"
  # Track locks in persistent storage
  persist_locks: true
  # Auto-cleanup locks after test
  cleanup_locks_after_test: true

# Environment configuration
environment:
  default_package: "ZADT_BLD_PKG01"  # Default package for creating objects (used if not specified in test case)
  # default_transport: ""  # Default transport request (used if not specified in test case)

# ============================================================================
# BUILDER TESTS
# ============================================================================

# Create Class
create_class:
  test_cases:
    - name: "builder_class"
      enabled: false
      description: "Create test class for ClassBuilder tests"
      params:
        class_name: "ZADT_BLD_CLS01"
        description: "ClassBuilder workflow class"
        # package_name: "ZADT_BLD_PKG01"  # Uses environment.default_package if omitted
        # transport_request: ""  # Uses environment.default_transport if omitted
        superclass: ""
        final: true
        source_code: |
          CLASS ZADT_BLD_CLS01 DEFINITION
            PUBLIC
            FINAL
            CREATE PUBLIC .

            PUBLIC SECTION.
              METHODS:
                get_text RETURNING VALUE(rv_text) TYPE string.
            PROTECTED SECTION.
            PRIVATE SECTION.
          ENDCLASS.

          CLASS ZADT_BLD_CLS01 IMPLEMENTATION.
            METHOD get_text.
              rv_text = 'Builder Test'.
            ENDMETHOD.
          ENDCLASS.

# Create Package
create_package:
  test_cases:
    - name: "builder_package"
      enabled: false
      description: "Package reserved for PackageBuilder tests"
      params:
        package_name: "ZADT_BLD_PKG01"
        super_package: "ZADT_BLD_SUPER"
        description: "PackageBuilder workflow package"
        package_type: "development"

# Create Domain
create_domain:
  test_cases:
    - name: "builder_domain"
      enabled: false
      description: "Domain used by DomainBuilder workflow tests"
      params:
        domain_name: "ZADT_BLD_DOM01"
        description: "DomainBuilder workflow domain"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        datatype: "CHAR"
        length: 5
        decimals: 0
        lowercase: false
        sign_exists: false

# Create Data Element
create_data_element:
  test_cases:
    - name: "builder_data_element"
      enabled: false
      description: "Data element reserved for DataElementBuilder tests"
      params:
        data_element_name: "ZADT_BLD_DTEL01"
        description: "DataElementBuilder workflow data element"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        # Allowed type_kind values:
        #   - domain
        #   - predefinedAbapType
        #   - refToPredefinedAbapType
        #   - refToDictionaryType
        #   - refToClifType
        type_kind: "predefinedAbapType"
        data_type: "CHAR"
        length: 100
        decimals: 0
        short_label: "Builder"
        medium_label: "Builder Data"
        long_label: "Builder Data Element"
        heading_label: "Builder Data Element"

# Create Interface
create_interface:
  test_cases:
    - name: "builder_interface"
      enabled: false
      description: "Interface reserved for InterfaceBuilder tests"
      params:
        interface_name: "ZADT_BLD_IF01"
        description: "InterfaceBuilder workflow interface"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        source_code: |
          INTERFACE ZADT_BLD_IF01
            PUBLIC .
            METHODS: test_method.
          ENDINTERFACE.

# Create Program
create_program:
  test_cases:
    - name: "builder_program"
      enabled: false
      description: "Program reserved for ProgramBuilder tests"
      params:
        program_name: "ZADT_BLD_PROG01"
        description: "ProgramBuilder workflow report"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        program_type: "executable"
        source_code: |
          REPORT ZADT_BLD_PROG01.
          WRITE: / 'Builder test program'.

# Create Table
create_table:
  test_cases:
    - name: "builder_table"
      enabled: false
      description: "Table reserved for TableBuilder tests"
      params:
        table_name: "ZADT_BLD_TAB01"
        description: "TableBuilder workflow table"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        delivery_class: "A"
        data_class: "APPL0"
        ddl_code: |
          @EndUserText.label: 'Builder test table'
          @AbapCatalog.tableCategory: #TRANSPARENT
          @AbapCatalog.deliveryClass: #A
          @AbapCatalog.dataBrowser: #ALLOWED
          define table ZADT_BLD_TAB01 {
            key client : abap.clnt not null;
            key builder_id : abap.char(10) not null;
            description : abap.char(40);
            last_changed_by : abap.char(12);
            last_changed_on : abap.dats;
          }

# Create Structure
create_structure:
  test_cases:
    - name: "builder_structure"
      enabled: false
      description: "Structure reserved for StructureBuilder tests"
      params:
        structure_name: "ZADT_BLD_STRU01"
        description: "StructureBuilder workflow structure"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        ddl_code: |
          @EndUserText.label: 'StructureBuilder workflow structure'
          @AbapCatalog.enhancement.category: #NOT_EXTENSIBLE
          define structure ZADT_BLD_STRU01 {
            mandt : abap.clnt;
            field1 : abap.int1;
          }

# Create View
create_view:
  test_cases:
    - name: "builder_view"
      enabled: false
      description: "View reserved for ViewBuilder tests"
      params:
        view_name: "ZADT_BLD_VIEW01"
        description: "ViewBuilder workflow view"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        ddl_source: |
          @EndUserText.label: 'Builder view on MARA'
          @AbapCatalog.sqlViewName: 'ZADTVW01'
          @AbapCatalog.compiler.compareFilter: true
          @AccessControl.authorizationCheck: #NOT_REQUIRED
          define view ZADT_BLD_VIEW01
            as select from mara
          {
            key mara.matnr,
            mara.ersda,
            mara.pstat
          }

# Create Function Group
create_function_group:
  test_cases:
    - name: "builder_function_group"
      enabled: false
      description: "Function group reserved for FunctionGroupBuilder tests"
      params:
        function_group_name: "ZADT_BLD_FGR01"
        description: "FunctionGroupBuilder workflow FUGR"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""

# Create Function Module
create_function_module:
  test_cases:
    - name: "builder_function_module"
      enabled: false
      description: "Function module reserved for FunctionModuleBuilder tests"
      params:
        function_module_name: "Z_ADT_BLD_FM01"  # Must start with Z_ or Y_ (with underscore)
        function_group_name: "ZADT_BLD_FGR02"  # Different from FunctionGroupBuilder test (ZADT_BLD_FGR01)
        description: "FunctionModuleBuilder workflow FM"
        # package_name: "ZADT_BLD_PKG01"
        # transport_request: ""
        source_code: |
          FUNCTION Z_ADT_BLD_FM01
            IMPORTING
              VALUE(IV_PARAM) TYPE STRING
            EXPORTING
              VALUE(EV_RESULT) TYPE STRING.
            ev_result = |Result: { iv_param }|.
          ENDFUNCTION.

# Create Transport
create_transport:
  test_cases:
    - name: "builder_transport"
      enabled: false
      description: "Transport reserved for TransportBuilder tests"
      params:
        description: "TransportBuilder workflow transport"
        # package_name: "ZADT_BLD_PKG01"
